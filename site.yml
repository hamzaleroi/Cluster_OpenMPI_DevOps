---
- name: make the hosts accessible from the outside
  hosts: all
  gather_facts: no
  vars:
    username: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          32613035663436306361653832373232396631303062663935363033616230366363636561343332
          3630323965386362303161396565323635656265646235630a346533313436373335613036623537
          63653263613762313064333836616633386232386431343635616135663832626162316564303363
          3130343531663736360a353334643464623533393332376538343766396637303935333432343137
          3864
    password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          39353862323966316461323539633638666539623462356262376234346561366234373234356662
          3933353061666362613462663865383138383166386430640a323832373134636534653662393365
          64383035383332663630626331613165633861363530643336393030386466386361336436366139
          3761663338366461370a363534646264303935666630343464386166616366666439363266653663
          3562
  roles:
  - {role: passwordless_user, username: "{{username_}}", password: "{{password_}}"}
  - {role: create_inventory, tags: ["register"], interface: "ansible_eth1", username: "{{username_}}"}
  - {role: known_hosts, interface: "ansible_eth1" }
    